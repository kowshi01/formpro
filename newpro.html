<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="newpro.css">
</head>
<body>
    <form id="form">
        <h1>Form</h1>
        <div class="div"></div>
        <div>
            <label for="name1"> Name : </label><br>
            <input type="text" id="name1"><br>
        </div>
        <div>
            <label for="email" > email : </label><br>
            <input type="text" id="email"><br><br>
        </div>
        <div>
            <input class="button" style="color: mediumvioletred;"  type="Submit" value="Submit">
        </div>
    </form>
    <div id="output">

    </div>
    <ul class="ul"></ul>
    <script>
        var form=document.getElementById('form');
        form.addEventListener('submit',storeitems)
        function storeitems(e){
            e.preventDefault();
            let userna=document.getElementById('name1').value;
            let emaili=document.getElementById('email').value;
            let obj={
                username : userna,
                emailid : emaili
            }
            localStorage.setItem(obj.emailid,JSON.stringify(obj));
            let myobj=JSON.parse(localStorage.getItem(obj.emailid));
            newUser(myobj);
         }            
     function newUser(nuser){
       /* if(localStorage.getItem(nuser.emailid)!==null){
            removeFromScreen(nuser.email);
        }*/
        let parentNode=document.getElementById('output');
        let childHTML=`<h4 id='heading'> ${nuser.username} - ${nuser.emailid} <button onclick=edituser('${nuser.username},${nuser.emailid}')>Edit</button>
            <button onclick=deluser('${nuser.emailid}')>Delete</button></h4>`;
        parentNode.innerHTML=parentNode.innerHTML+childHTML;
     }
        
     function edituser(usern,mailid){
        document.getElementById('name1').value=usern;
        document.getElementById('email').value=mailid;
        deluser(mailid);
     }  
     function deluser(mailid) {
        localStorage.removeItem(mailid);
        removeFromScreen(mailid);
     }  
    function removeFromScreen(mailid){
        const parentNodee=document.getElementById('output');
        const childNodee=document.getElementById('heading');
        if(childNodee){
        parentNodee.removeChild(childNodee); 
        }
     }
        </script>
    </body>
</html>